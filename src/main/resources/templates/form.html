<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Zadanie</title>
    <link rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
          integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
          crossorigin="anonymous">
</head>
<body>
<div style="padding-left: 5%; padding-right: 5%; padding-top: 2%">
    <div class="header">
        <h1>28.1 Zarządzenie zadaniami</h1>
    </div>
    <form th:action="'/'+${actionLink}" th:object="${task}" method="post" style="width: 50%">
        <div>
            <h2 th:text="${actionDescription}">DODAJ AKCJĘ</h2>
        </div>
        <br>
        <div class="form-group">
            <label for="inputId">Numer</label>
            <input type="number" class="form-control" step="1" id="inputId"
                   placeholder="Numer zadania - autonumeracja" name="id" required readonly
                   th:value="${task?.id}">
        </div>
        <div class="form-group">
            <label for="category">Typ</label>
            <select id="category" class="form-control" name="category" required th:readonly="${isBlocked}">
                <option value="" selected disabled>
                    Wybierz kategorię zadania..
                </option>
                <option
                        th:if="${task?.category != null}"
                        th:value="${task?.category}"
                        th:text="'Poprzednia wartość: '+${task?.category?.description}"
                        selected>
                    Poprzednia wartość
                </option>
                <option th:if="${action} != 'Usuń'" th:each="type: ${T(pl.zalwi.data.Category).values()}"
                        th:value="${type}" th:text="${type.getDescription()}">
                </option>
            </select>
        </div>
        <div class="form-group">
            <label for="inputDescription">Opis</label>
            <input type="text" class="form-control" id="inputDescription" placeholder="Opis zadania" name="description"
                   required th:value="${task?.description}" th:readonly="${isBlocked}">
        </div>
        <div class="form-group">
            <label for="inputCreationDate">Data utworzenia</label>
            <input class="form-control" type="datetime-local" id="inputCreationDate" name="creationDate" required
                   th:value="${task?.creationDate}" th:readonly="${isBlocked}">
        </div>
        <div class="form-group">
            <label for="inputDeadlineDate">Termin wykonania</label>
            <input class="form-control" type="datetime-local" id="inputDeadlineDate" name="deadlineDate" required
                   th:value="${task?.deadlineDate}" th:readonly="${isBlocked}">
        </div>
        <div class="form-group">
            <label for="inputEndDate">Data zakończenia</label>
            <input class="form-control" type="datetime-local" id="inputEndDate" name="endDate" required
                   th:value="${task?.endDate}" th:readonly="${isBlocked}" th:disabled="${isNew}">
        </div>
        <div class="form-check" style="float: right">
            <input class="form-check-input" type="checkbox" id="finished" disabled th:checked="${task?.finished}">
            <label class="form-check-label" for="finished">
                Wykonane
            </label>
        </div>

        <p th:if="${action} == 'Usuń'" th:text="'UWAGA: Usunięcie danych bezpowrotne!'" style="color: red"></p>
        <button type="submit" class="btn btn-primary" th:text="${action}">Typ akcji</button>
    </form>
    <a href="/">powrót do strony głównej</a>
</div>
</body>
</html>